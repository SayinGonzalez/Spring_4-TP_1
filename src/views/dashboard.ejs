<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="/js/deleteHero.js"></script>
    <title>Superheroes</title>
</head>

<body>

    <!-- Mostrar mensaje de Ã©xito si se ha pasado desde el backend -->
    <% if (typeof successMessage !== "undefined" && successMessage) { %>
        <div id="mensajeExitoso" class="text-lg text-[#008000] bg-[#e0ffe0] text-center m-auto p-3">
            <%= successMessage %>
            <button type="button" onclick="this.parentElement.classList.add('hidden')" class="absolute top-0 right-4">x</button>
        </div>
    <% } %>

    <h2>Lista de Superheroes</h2>
    <table border="1" cellpadding="8" cellspacing="0" width="100%" height="200">
        <thead>
            <tr>
                <th>Superheroe</th>
                <th>Nombre Real</th>
                <th>Edad</th>
                <th>Planeta Origen</th>
                <th>Debilidad</th>
                <th>Poderes</th>
                <th>Aliados</th>
                <th>Enemigos</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <% superheroes.forEach(superheroe=> { %>
                <tr>
                    <td>
                        <%= superheroe.nombreSuperHeroe %>
                    </td>
                    <td>
                        <%= superheroe.nombreReal %>
                    </td>
                    <td>
                        <%= superheroe.edad %>
                    </td>
                    <td>
                        <%= superheroe.planetaOrigen %>
                    </td>
                    <td>
                        <%= superheroe.debilidad %>
                    </td>
                    <td>
                        <% superheroe.poderes.forEach(poder => { %>
                           <li><%= poder %></li>
                        <% }) %>
                    </td>
                    <td>
                        <% superheroe.aliados.forEach(aliado => { %>
                            <li><%= aliado %></li>
                        <% }) %>
                    </td>
                    <td>
                        <% superheroe.enemigos.forEach(enemigo => { %>
                            <li><%= enemigo %></li>
                        <% }) %>
                    </td>
                    <td>
                        <button type="button" onclick="window.location.href='/api/view/editar/<%= superheroe._id %>'">Editar</button>
                        <br>
                        <br>
                        <button type="button" onclick="eliminarSuperheroe('<%= superheroe._id %>')">Eliminar</button>
                    </td>
                </tr>
            <% }) %>
        </tbody>
    </table>

</body>

</html>